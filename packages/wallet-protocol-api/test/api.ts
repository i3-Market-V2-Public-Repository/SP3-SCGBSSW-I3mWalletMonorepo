import { Session, HttpInitiatorTransport } from '@i3m/wallet-protocol'

const { WalletApi } = _pkg

describe('WalletApi', function () {
  let api: _pkg.WalletApi
  const sessionJSON = {
    masterKey: {
      from: {
        name: 'Initiator'
      },
      to: {
        name: 'Wallet desktop'
      },
      port: 29170,
      na: 'ksBmutkm9_SDc0njzuFjaA',
      nb: '_tgx3uY8PrT-I-en6piAvw',
      secret: 'DbFnxzrEwMVeFTg-95cY4nzxucnorHzQ6vWRIsIYgDs'
    },
    code: '65794a68624763694f694a6b615849694c434a6c626d4d694f694a424d6a553252304e4e496e302e2e4c61366f564479384667786c585862362e2d4956666547594b736b6d675f3155745576644452346e4567645974746a716768497458696c2d6545626437636b674451634e59704c494a6d6359514776743545422d3757323956476d3645435577705965415a6567534d77514162323654695430652d345479396b65306d464a737a50473836556d4e56677659644253564a6478704f4b4b3654314a6762722d6862756d726836306b6c645f526866454c706a715131674d314f565052533833445333534e61543154595f6743353376534e576836307a435a32686730454b4e6a4d4570494b36684144752d55715f6d37516e50517753495976324845636871655465683345706d5976334c6251545a684a6c502d4c434c2d4e7243726e4c4846497854725859483263486573586830327671596f3449634b655243524b67417532674b3461557a454a72624853672d494875736569787a7a746c5f44687734574d7371737079564b6a7751524c7142556d4b6272515258564a72656653356e64383177585a396e564b78556a6d54672e3559384f71633874694b51635733765559742d6a7477'
  }

  this.timeout(30000)
  before(async function () {
    const transport = new HttpInitiatorTransport()
    const session = await Session.fromJSON(transport, sessionJSON)
    api = new WalletApi(session)
  })

  it('should get identities', async function () {
    const identities = await api.getIdentites()
    console.log(identities)
  })
})
